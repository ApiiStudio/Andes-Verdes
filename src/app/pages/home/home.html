<app-navbar></app-navbar>
<script src="https://kit.fontawesome.com/2e27035b45.js" crossorigin="anonymous"></script>
<div id="carouselExample" class="carousel slide">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="/SlidePaquetes.png" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
            <img src="SlideRent.png" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
            <img src="SlideVuelos.png" class="d-block w-100" alt="...">
        </div>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>
<main class="home-root">
    <!-- Contenedor -->
    <div class="search-wrapper">
        <div class="search-container">
            <button class="botonsearchh">
                <i class="fa-solid fa-magnifying-glass"></i>
            </button>

            <label for="searchInput" class="sr-only">Buscar parque</label>
            <input id="searchInput" type="search" placeholder="Buscar parque..." (input)="onSearchChange($event)"
                class="search-input" autocomplete="off" [value]="searchText" />
        </div>

        @if (filteredParques.length > 0) {
        <ul class="suggestions">
            @for (parque of filteredParques; track parque.properties.name) {
            <li (click)="selectParque(parque)">
                {{ parque.properties.name }}
                <span class="provincia">({{ parque.properties.description }})</span>
            </li>
            }
        </ul>
        }
    </div>

    <div class="container">
        <div class="map-frame">
            <div id="map"></div>
            <div class="map-placeholder" id="map-placeholder">
                Cargando mapa... si el mapa no aparece, revise la consola del navegador.
            </div>
        </div>
    </div>

    <div class="accordion-container">
        @if (regions && regions.length > 0) {
        <div class="accordion" id="accordionExample">
            @for (region of regions; track region.id) {
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        attr.data-bs-target="{{ '#collapse-' + region.id }}" aria-expanded="false" attr.aria-controls="{{ 'collapse-' + region.id }}">
                        {{ region.name }} <span class="badge bg-light text-muted ms-2">{{ region.parks.length }}</span>
                    </button>
                </h2>
                <div id="collapse-{{region.id}}" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        @if (region.parks && region.parks.length > 0) {
                        <ul class="region-list">
                            @for (p of region.parks; track p.properties.name) {
                            <li (click)="selectParque(p)" class="region-item">
                                {{ getDisplayName(p) }}
                                <small class="text-muted"> - {{ getProvince(p) }}</small>
                            </li>
                            }
                        </ul>
                        }
                    </div>
                </div>
            </div>
            }
        </div>
        }
        @if (!(regions && regions.length > 0)) {
        <div class="text-muted">Cargando regiones...</div>
        }
    </div>
</main>

<app-footer></app-footer>